import{e as _,f as w,u as v,g,r as m,o as h,c as b,a as t,b as c,w as x,h as o,n as p}from"./index-0903f845.js";import{s as V}from"./statusStore-136a0ffa.js";const D=_("loginStore",()=>{let n=w({username:"",password:""});const s="https://vue3-course-api.hexschool.io/v2",u=v();async function a(){const r=V();try{const i=await g.post(`${s}/admin/signin`,n);l();const{expired:e,message:d,token:f}=i.data;document.cookie=`myToken = ${f}; expires = ${new Date(e)};`,await r.swAlert("center","success",d,!1,!1),u.push("/admin/products")}catch(i){l();const{message:e}=i.response.data;await r.swAlert("center","error",e,!1,!1)}}function l(){n.username="",n.password=""}return{adminData:n,signin:a}});function k(n){return/^[a-zA-Z]\w{8}$/.test(n)?!0:"密碼為字母開頭，長度9字元"}const y={class:"container"},S={class:"row vh-100 d-flex flex-column align-items-center"},$={class:"col-6 col-sm-6 col-md-4 col-lg-3 mt-auto mb-auto"},C=t("h1",{class:"h3 mb-3 font-weight-normal text-center"},"請先登入",-1),A={class:"form-floating mb-3"},B=t("label",{for:"account"},"Email address",-1),P={class:"form-floating"},R=t("label",{for:"password"},"Password",-1),z=t("button",{type:"submit",class:"btn btn-lg btn-primary mt-3 w-100"}," 登入 ",-1),U={__name:"LoginComponent",setup(n){const s=D();return(u,a)=>{const l=m("v-field"),r=m("error-message"),i=m("v-form");return h(),b("div",y,[t("div",S,[t("div",$,[c(i,{onSubmit:a[2]||(a[2]=e=>o(s).signin())},{default:x(({errors:e})=>[C,t("div",A,[c(l,{type:"email",name:"email",class:p(["form-control",{"is-invalid":e.email,"is-valid":o(s).adminData.username!==""&&!e.email}]),id:"account",placeholder:"name@example.com",rules:"email|required",modelValue:o(s).adminData.username,"onUpdate:modelValue":a[0]||(a[0]=d=>o(s).adminData.username=d)},null,8,["class","modelValue"]),B,c(r,{name:"email",class:"invalid-feedback"})]),t("div",P,[c(l,{type:"password",name:"password",class:p(["form-control",{"is-invalid":e.password,"is-valid":o(s).adminData.password!==""&&!e.password}]),id:"password",placeholder:"Password",rules:o(k),modelValue:o(s).adminData.password,"onUpdate:modelValue":a[1]||(a[1]=d=>o(s).adminData.password=d)},null,8,["class","rules","modelValue"]),R,c(r,{name:"password",class:"invalid-feedback"})]),z]),_:1})])])])}}};export{U as default};
